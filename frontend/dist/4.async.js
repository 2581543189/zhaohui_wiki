(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"221B":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("o0o1")),o=r(a("MVZn")),s=a("7Y5E"),d=a("+n12"),i={namespace:"data_book",state:{list:[],pagination:{current:1,pageSize:10,total:0},formValues:{name:"",first:"",second:"",third:""},options:[],modalVisible:!1,updateModalData:{id:0,name:"-",author:"-",url:"http://",first:"",second:"",third:"",count:0,current:0,startDate:"1970-01-01",endDate:null,img:"",score:""},updateModalVisible:!1},effects:{fetch:n.default.mark(function e(t,a){var r,i,l,u,c,p,f;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,i=a.call,l=a.put,u=a.select,"undefined"==typeof r&&(r={}),e.next=5,u(e=>e.data_book.formValues);case 5:return c=e.sent,p=(0,o.default)({},c,r),e.next=9,i(s.queryBook,p);case 9:if(f=e.sent,1==f.error){e.next=17;break}return e.next=13,l({type:"save",payload:f});case 13:return e.next=15,l({type:"setFormValues",payload:{formValues:{title:p.title,first:p.first,second:p.second,third:p.third}}});case 15:e.next=18;break;case 17:(0,d.openNotification)("error",f.message);case 18:case"end":return e.stop()}},e,this)}),add:n.default.mark(function e(t,a){var r,o,i,l,u;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,t.callback,o=a.call,i=a.put,l=a.select,e.next=4,o(s.addBook,r);case 4:if(u=e.sent,1==u.error){e.next=16;break}return e.next=8,i({type:"setModalVisible",payload:!1});case 8:return(0,d.openNotification)("success","\u65b0\u589e\u4e66\u7c4d"+u.name+"["+u.id+"]\u6210\u529f"),e.next=11,l(e=>e.data_book.formValues);case 11:return e.sent,e.next=14,i({type:"fetch",payload:{currentPage:1,pageSize:10,id:u.id}});case 14:e.next=17;break;case 16:(0,d.openNotification)("error",u.message);case 17:case"end":return e.stop()}},e,this)}),delete:n.default.mark(function e(t,a){var r,i,l,u,c,p;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,i=a.call,l=a.put,u=a.select,e.next=4,i(s.deleteBook,r);case 4:if(c=e.sent,1==c.error){e.next=14;break}return(0,d.openNotification)("success","\u5220\u9664\u4e66\u7c4d["+c.id+"]\u6210\u529f"),e.next=9,u(e=>e.data_book.formValues);case 9:return p=e.sent,e.next=12,l({type:"fetch",payload:(0,o.default)({currentPage:1,pageSize:10},p)});case 12:e.next=15;break;case 14:(0,d.openNotification)("error",c.message);case 15:case"end":return e.stop()}},e,this)}),updateStep1:n.default.mark(function e(t,a){var r,o,i,l,u;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=a.call,i=a.put,l={id:r.id},e.next=5,o(s.queryBook,l);case 5:if(u=e.sent,1==u.error){e.next=11;break}return e.next=9,i({type:"setUpdateModalVisible",payload:{updateModalVisible:!0,updateModalData:u.list[0]}});case 9:e.next=12;break;case 11:(0,d.openNotification)("error",u.message);case 12:case"end":return e.stop()}},e,this)}),updateStep2:n.default.mark(function e(t,a){var r,i,l,u,c,p;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,i=a.call,l=a.put,u=a.select,e.next=4,i(s.updateBook,r);case 4:if(c=e.sent,1==c.error){e.next=15;break}return e.next=8,l({type:"setUpdateModalVisible",payload:{updateModalVisible:!1,updateModalData:{id:0,name:"-",author:"-",url:"http://",first:"",second:"",third:"",count:0,current:0,startDate:"1970-01-01",endDate:null,img:"",score:""}}});case 8:return e.next=10,u(e=>e.data_book.formValues);case 10:return p=e.sent,e.next=13,l({type:"fetch",payload:(0,o.default)({currentPage:1,pageSize:10},p)});case 13:e.next=16;break;case 15:(0,d.openNotification)("error",c.message);case 16:case"end":return e.stop()}},e,this)})},reducers:{save(e,t){return(0,o.default)({},e,{list:t.payload.list,pagination:t.payload.pagination})},setFormValues(e,t){return e.formValues=(0,o.default)({},e.formValues,t.payload.formValues),(0,o.default)({},e)},setModalVisible(e,t){return(0,o.default)({},e,{modalVisible:t.payload})},setUpdateModalVisible(e,t){var a={id:0,name:"-",author:"-",url:"http://",first:"",second:"",third:"",count:0,current:0,startDate:"1970-01-01",endDate:null,img:"",score:""};return(0,o.default)({},e,{updateModalVisible:t.payload.updateModalVisible,updateModalData:t.payload.updateModalData?t.payload.updateModalData:a})}}};t.default=i}}]);