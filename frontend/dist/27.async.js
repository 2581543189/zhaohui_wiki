(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{hyZV:function(e,t,l){"use strict";var a=l("TqRt"),d=l("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(l("pVnL"));l("IzEo");var n=a(l("bx4M"));l("qVdP");var i=a(l("jsC+"));l("lUTK");var s=a(l("BvKs"));l("14J3");var u=a(l("BMrR"));l("+L6B");var o=a(l("2/Rp"));l("jCWc");var c=a(l("kPKH")),p=a(l("MVZn"));l("/zsF");var f=a(l("PArb"));l("5Dmo");var h=a(l("3S7+"));l("Pwec");var m=a(l("CtXQ"));l("2qtc");var b=a(l("kLXV"));l("+BJd");var v=a(l("mr32"));l("5NDa");var E=a(l("5rEg"));l("y8nQ");var D=a(l("Vl3Y"));l("OaEy");var g=a(l("2fM7"));l("iQDF");var y,C,M,V,w,k,F,Y=a(l("+eQT")),x=a(l("zHco")),U=a(l("CkN6")),L=d(l("q1tI")),_=l("MuoO"),T=a(l("wd/R")),R=l("+n12"),O=a(l("iQSN")),S=l("zvKM"),q=Y.default.RangePicker,I=g.default.Option,z=D.default.Item,N=(y=D.default.create(),y(C=class extends L.Component{constructor(e){super(e),this.okHandle=(()=>{var e=this.props.form;e.validateFields((t,l)=>{t||(e.resetFields(),this.handleAdd(l))})}),this.handleModalVisible=this.props.handleModalVisible,this.handleAdd=this.props.handleAdd,this.dispatch=this.props.dispatch}render(){var e=this.props,t=e.form,l=(e.options,e.modalVisible);return L.default.createElement(b.default,{destroyOnClose:!0,title:"\u65b0\u5efa\u4efb\u52a1",visible:l,onOk:this.okHandle,onCancel:()=>this.handleModalVisible(!1)},L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7b80\u8ff0"},t.getFieldDecorator("sketch",{rules:[{required:!0,validator:S.hanziValidFunction}]})(L.default.createElement(E.default,{placeholder:"\u7b80\u5355\u63cf\u8ff0"}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u96be\u5ea6"},t.getFieldDecorator("level",{rules:[{required:!0}]})(L.default.createElement(g.default,{style:{width:"100%"}},[0,1,2,3,4].map(e=>L.default.createElement(I,{key:e,value:e,style:{width:"100%"}},L.default.createElement(v.default,{color:S.bulletinLevelClass[e]},S.bulletinLevelText[e])))))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5f00\u59cb\u65e5\u671f"},t.getFieldDecorator("startDate",{rules:[{required:!0}]})(L.default.createElement(Y.default,{style:{width:"100%"}}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7ed3\u675f\u65e5\u671f"},t.getFieldDecorator("endDate",{rules:[]})(L.default.createElement(Y.default,{style:{width:"100%"}}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6267\u884curl"},t.getFieldDecorator("startUrl",{rules:[{required:!0,validator:S.urlValidFunction}]})(L.default.createElement(E.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7ed3\u675furl"},t.getFieldDecorator("endUrl",{rules:[]})(L.default.createElement(E.default,{placeholder:""}))))}})||C),P=(M=D.default.create(),M(V=class extends L.PureComponent{constructor(e){super(e),this.updateOkHandle=(()=>{var e=this.props.form;e.validateFields((e,t)=>{e||this.handleUpdate(t)})}),this.handleUpdateModalVisible=this.props.handleUpdateModalVisible,this.handleUpdate=this.props.handleUpdate,this.dispatch=this.props.dispatch}render(){var e=this.props,t=e.updateModalVisible,l=e.form,a=(e.options,e.updateModalData);return L.default.createElement(b.default,{destroyOnClose:!0,title:"\u66f4\u65b0\u4efb\u52a1",visible:t,onOk:this.updateOkHandle,onCancel:()=>this.handleUpdateModalVisible(!1)},L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"id"},l.getFieldDecorator("id",{rules:[{required:!0}],initialValue:a.id})(L.default.createElement(E.default,{prefix:L.default.createElement(m.default,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"",readOnly:!0}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7b80\u8ff0"},l.getFieldDecorator("sketch",{rules:[{required:!0,validator:S.hanziValidFunction}],initialValue:a.sketch})(L.default.createElement(E.default,{placeholder:"\u7b80\u5355\u63cf\u8ff0"}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u96be\u5ea6"},l.getFieldDecorator("level",{rules:[{required:!0}],initialValue:a.level})(L.default.createElement(g.default,{style:{width:"100%"}},[0,1,2,3,4].map(e=>L.default.createElement(I,{key:e,value:e,style:{width:"100%"}},L.default.createElement(v.default,{color:S.bulletinLevelClass[e]},S.bulletinLevelText[e])))))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5f00\u59cb\u65e5\u671f"},l.getFieldDecorator("startDate",{rules:[{required:!0}],initialValue:a.startDate?(0,T.default)(a.startDate):null})(L.default.createElement(Y.default,{style:{width:"100%"}}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7ed3\u675f\u65e5\u671f"},l.getFieldDecorator("endDate",{rules:[],initialValue:a.endDate?(0,T.default)(a.endDate):null})(L.default.createElement(Y.default,{style:{width:"100%"}}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6267\u884curl"},l.getFieldDecorator("startUrl",{rules:[{required:!0,validator:S.urlValidFunction}],initialValue:a.startUrl})(L.default.createElement(E.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))),L.default.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7ed3\u675furl"},l.getFieldDecorator("endUrl",{rules:[],initialValue:a.endUrl})(L.default.createElement(E.default,{placeholder:""}))))}})||V),A=(w=(0,_.connect)(e=>{var t=e.data_bulletin,l=e.loading;return{data_bulletin:t,loading:l.models.data_bulletin}}),k=D.default.create(),w(F=k(F=class extends L.Component{constructor(){super(...arguments),this.state={selectedRows:[]},this.columns=[{title:"id",dataIndex:"id",sorter:!0,align:"center"},{title:"\u6982\u8ff0",dataIndex:"sketch",align:"center",render:(e,t)=>{var l=t.sketch;if(l.length>=10){var a=l.substr(0,10);return a+="...",L.default.createElement(h.default,{title:l},L.default.createElement("span",null,a))}return L.default.createElement("span",null,l)}},{title:"\u96be\u5ea6",dataIndex:"level",align:"center",filters:[{text:L.default.createElement(v.default,{color:S.bulletinLevelClass[0]},S.bulletinLevelText[0]),value:0},{text:L.default.createElement(v.default,{color:S.bulletinLevelClass[1]},S.bulletinLevelText[1]),value:1},{text:L.default.createElement(v.default,{color:S.bulletinLevelClass[2]},S.bulletinLevelText[2]),value:2},{text:L.default.createElement(v.default,{color:S.bulletinLevelClass[3]},S.bulletinLevelText[3]),value:3},{text:L.default.createElement(v.default,{color:S.bulletinLevelClass[4]},S.bulletinLevelText[4]),value:4}],render:e=>{return L.default.createElement(v.default,{color:S.bulletinLevelClass[e]},S.bulletinLevelText[e])}},{title:"\u5f00\u59cb\u65e5\u671f",sorter:!0,dataIndex:"startDate",align:"center",render(e){return(0,T.default)(e).format("YYYY-MM-DD")}},{title:"\u7ed3\u675f\u65e5\u671f",sorter:!0,dataIndex:"endDate",align:"center",render(e){return null==e?"-":(0,T.default)(e).format("YYYY-MM-DD")}},{title:"\u64cd\u4f5c",align:"center",render:(e,t)=>{return null!=t.endUrl&&""!=t.endUrl?L.default.createElement(L.Fragment,null,L.default.createElement("a",{href:t.startUrl,target:"_blank"},"\u8fdb\u884c\u4efb\u52a1"),L.default.createElement(f.default,{type:"vertical"}),L.default.createElement("a",{href:t.endUrl,target:"_blank"},"\u67e5\u770b\u8fdb\u5ea6"),L.default.createElement(f.default,{type:"vertical"}),L.default.createElement("a",{onClick:()=>this.showUpdate(t)},"\u4fee\u6539"),L.default.createElement(f.default,{type:"vertical"}),L.default.createElement("a",{onClick:()=>this.dealDelete(t)},"\u5220\u9664")):L.default.createElement(L.Fragment,null,L.default.createElement("a",{href:t.startUrl,target:"_blank"},"\u8fdb\u884c\u4efb\u52a1"),L.default.createElement(f.default,{type:"vertical"}),L.default.createElement("a",{onClick:()=>this.showUpdate(t)},"\u4fee\u6539"),L.default.createElement(f.default,{type:"vertical"}),L.default.createElement("a",{onClick:()=>this.dealDelete(t)},"\u5220\u9664"))}}],this.handleMenuClick=(e=>{this.props.dispatch;var t=this.state.selectedRows;if(t)switch(e.key){case"remove":(0,R.openNotification)("info","\u8be5\u529f\u80fd\u6682\u672a\u5b9e\u73b0");break;default:break}}),this.handleSelectRows=(e=>{this.setState({selectedRows:e})}),this.handleStandardTableChange=((e,t,l)=>{var a=this.props.dispatch,d=Object.keys(t).reduce((e,l)=>{var a=(0,p.default)({},e);return a[l]=(0,S.getValue)(t[l]),a},{}),r=(0,p.default)({currentPage:e.current,pageSize:e.pageSize},d);l.field&&(r.sorter=`${l.field}_${l.order}`),a({type:"data_bulletin/fetch",payload:r})}),this.handleSearch=(e=>{e.preventDefault();var t=this.props,l=t.dispatch,a=t.form;a.validateFields((e,t)=>{if(!e){null!=t.range&&2==t.range.length&&null!=t.range[0]&&(t.startDate=t.range[0].format("YYYY-MM-DD")),null!=t.range&&2==t.range.length&&null!=t.range[1]&&(t.endDate=t.range[1].format("YYYY-MM-DD"));var a={};Object.keys(t).forEach(function(e){"undefined"!=typeof t[e]&&(a[e]=t[e])}),l({type:"data_bulletin/fetch",payload:a})}})}),this.handleFormReset=(()=>{var e=this.props,t=e.form,l=e.dispatch;t.resetFields(),l({type:"data_bulletin/setFormValues",payload:{formValues:{}}}),l({type:"data_bulletin/fetch"})}),this.handleAdd=(e=>{var t=this.props.dispatch;e.startDate=e.startDate.format("YYYY-MM-DD"),null!=e.endDate&&(e.endDate=e.endDate.format("YYYY-MM-DD")),t({type:"data_bulletin/add",payload:(0,p.default)({},e)})}),this.handleModalVisible=(e=>{var t=this.props.dispatch;"undefined"==typeof e&&(e=!1),t({type:"data_bulletin/setModalVisible",payload:!!e})}),this.handleUpdateModalVisible=(e=>{var t=this.props.dispatch;"undefined"==typeof e&&(e=!1),t({type:"data_bulletin/setUpdateModalVisible",payload:{updateModalVisible:!!e}})}),this.handleUpdate=(e=>{var t=this.props.dispatch;b.default.confirm({title:"\u4fee\u6539\u4efb\u52a1",content:"\u786e\u5b9a\u66f4\u65b0\u4efb\u52a1["+e.id+"]\u5417?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:()=>{e.startDate=e.startDate.format("YYYY-MM-DD"),null!=e.endDate&&(e.endDate=e.endDate.format("YYYY-MM-DD")),t({type:"data_bulletin/updateStep2",payload:(0,p.default)({},e)})}})})}componentDidMount(){var e=this.props.dispatch;e({type:"data_bulletin/fetch"})}onRangeChange(e){console.log(e)}renderForm(e){var t=this.props.form.getFieldDecorator,l=[];return null!=e.startDate&&""!=e.startDate?l[0]=(0,T.default)(e.startDate):l[0]=null,null!=e.endDate&&""!=e.endDate?l[1]=(0,T.default)(e.endDate):l[1]=null,L.default.createElement(D.default,{onSubmit:this.handleSearch,layout:"inline"},L.default.createElement(u.default,{gutter:{md:8,lg:24,xl:48}},L.default.createElement(c.default,{md:8,sm:24},L.default.createElement(z,{label:"\u65f6\u95f4\u8303\u56f4"},t("range",{initialValue:l})(L.default.createElement(q,{onChange:e=>{this.onRangeChange(e)}})))),L.default.createElement(c.default,{md:8,sm:24},L.default.createElement("span",{className:O.default.submitButtons},L.default.createElement(o.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),L.default.createElement(o.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}showUpdate(e){var t=this.props.dispatch;t({type:"data_bulletin/updateStep1",payload:{id:e.id}})}dealDelete(e){var t=this.props.dispatch;b.default.confirm({title:"\u5220\u9664\u4efb\u52a1",content:"\u786e\u5b9a\u5220\u9664\u4efb\u52a1["+e.id+"]\u5417?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:()=>{t({type:"data_bulletin/delete",payload:e.id})}})}render(){var e=this.props,t=e.data_bulletin,l=t.list,a=t.pagination,d=t.formValues,u=t.modalVisible,c=t.updateModalData,p=t.updateModalVisible,f=e.loading,h=this.state.selectedRows,b={list:l,pagination:a},v=L.default.createElement(s.default,{onClick:this.handleMenuClick,selectedKeys:[]},L.default.createElement(s.default.Item,{key:"remove"},"\u5220\u9664")),E={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,dispatch:this.props.dispatch},D={handleUpdate:this.handleUpdate,handleUpdateModalVisible:this.handleUpdateModalVisible,dispatch:this.props.dispatch,updateModalData:c};return L.default.createElement(x.default,{title:"\u4efb\u52a1\u7ba1\u7406"},L.default.createElement(n.default,{bordered:!1},L.default.createElement("div",{className:O.default.tableList},L.default.createElement("div",{className:O.default.tableListForm},this.renderForm(d)),L.default.createElement("div",{className:O.default.tableListOperator},L.default.createElement(o.default,{icon:"plus",type:"primary",onClick:()=>this.handleModalVisible(!0)},"\u65b0\u5efa"),h.length>0&&L.default.createElement("span",null,L.default.createElement(i.default,{overlay:v},L.default.createElement(o.default,null,"\u6279\u91cf\u64cd\u4f5c ",L.default.createElement(m.default,{type:"down"}))))),L.default.createElement(U.default,{selectedRows:h,loading:f,data:b,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,rowKey:"id"}))),L.default.createElement(N,(0,r.default)({},E,{modalVisible:u})),L.default.createElement(P,(0,r.default)({},D,{updateModalVisible:p,updateModalData:c})))}})||F)||F),H=A;t.default=H}}]);