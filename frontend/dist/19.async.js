(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{JCWX:function(e,t,a){"use strict";var l=a("TqRt"),d=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(a("pVnL"));a("IzEo");var i=l(a("bx4M"));a("qVdP");var s=l(a("jsC+"));a("lUTK");var n=l(a("BvKs"));a("14J3");var o=l(a("BMrR"));a("+L6B");var p=l(a("2/Rp"));a("jCWc");var u=l(a("kPKH")),c=l(a("MVZn"));a("/zsF");var f=l(a("PArb"));a("5Dmo");var h=l(a("3S7+"));a("Pwec");var m=l(a("CtXQ"));a("2qtc");var y=l(a("kLXV"));a("6UJt");var E=l(a("DFOY"));a("iQDF");var v=l(a("+eQT"));a("5NDa");var b=l(a("5rEg"));a("y8nQ");var g=l(a("Vl3Y"));a("OaEy");var C,D,V,k,M,w,F,_=l(a("2fM7")),O=l(a("zHco")),S=l(a("CkN6")),U=d(a("q1tI")),x=a("MuoO"),q=l(a("wd/R")),R=a("+n12"),Y=l(a("iQSN")),I=a("zvKM"),T=_.default.Option,H=g.default.Item,N=(C=g.default.create(),C(D=class extends U.Component{constructor(e){super(e),this.okHandle=(()=>{var e=this.props.form;e.validateFields((t,a)=>{t||(e.resetFields(),this.handleAdd(a))})}),this.loadData=this.props.loadData,this.onChange=this.props.onChange,this.handleModalVisible=this.props.handleModalVisible,this.handleAdd=this.props.handleAdd,this.dispatch=this.props.dispatch}render(){var e=this.props,t=e.form,a=e.options,l=e.modalVisible;return U.default.createElement(y.default,{destroyOnClose:!0,title:"\u65b0\u5efa\u6587\u7ae0",visible:l,onOk:this.okHandle,onCancel:()=>this.handleModalVisible(!1)},U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6807\u9898"},t.getFieldDecorator("title",{rules:[{required:!0}]})(U.default.createElement(b.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u65e5\u671f"},t.getFieldDecorator("createDate",{rules:[{required:!0}]})(U.default.createElement(v.default,{style:{width:"100%"}}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e73\u53f0"},t.getFieldDecorator("platform",{rules:[{required:!0}]})(U.default.createElement(b.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5206\u7c7b"},t.getFieldDecorator("type",{rules:[{required:!0,validator:I.skillsValidFunction}]})(U.default.createElement(E.default,{options:a,loadData:e=>this.loadData(e),changeOnSelect:!0,style:{width:"100%"}}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"url"},t.getFieldDecorator("url",{rules:[{required:!0,validator:I.urlValidFunction}]})(U.default.createElement(b.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))))}})||D),P=(V=g.default.create(),V(k=class extends U.PureComponent{constructor(e){super(e),this.updateOkHandle=(()=>{var e=this.props.form;e.validateFields((e,t)=>{e||this.handleUpdate(t)})}),this.loadData=this.props.loadData,this.onChange=this.props.onChange,this.handleUpdateModalVisible=this.props.handleUpdateModalVisible,this.handleUpdate=this.props.handleUpdate,this.dispatch=this.props.dispatch}transfer(e){return"undefined"==typeof e?[]:[e.first,e.second,e.third]}render(){var e=this.props,t=e.updateModalVisible,a=e.form,l=e.options,d=e.updateModalData;return U.default.createElement(y.default,{destroyOnClose:!0,title:"\u66f4\u65b0\u6587\u7ae0",visible:t,onOk:this.updateOkHandle,onCancel:()=>this.handleUpdateModalVisible(!1)},U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"id"},a.getFieldDecorator("id",{rules:[{required:!0}],initialValue:d.id})(U.default.createElement(b.default,{prefix:U.default.createElement(m.default,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"",readOnly:!0}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u6807\u9898"},a.getFieldDecorator("title",{rules:[{required:!0}],initialValue:d.title})(U.default.createElement(b.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u65e5\u671f"},a.getFieldDecorator("createDate",{rules:[{required:!0}],initialValue:(0,q.default)(d.createDate)})(U.default.createElement(v.default,{style:{width:"100%"}}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e73\u53f0"},a.getFieldDecorator("platform",{rules:[{required:!0}],initialValue:d.platform})(U.default.createElement(b.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5206\u7c7b"},a.getFieldDecorator("type",{rules:[{required:!0,validator:I.skillsValidFunction}],initialValue:this.transfer(d.skill)})(U.default.createElement(E.default,{options:l,loadData:e=>this.loadData(e),changeOnSelect:!0,style:{width:"100%"}}))),U.default.createElement(H,{labelCol:{span:5},wrapperCol:{span:15},label:"url"},a.getFieldDecorator("url",{rules:[{required:!0,validator:I.urlValidFunction}],initialValue:d.url})(U.default.createElement(b.default,{placeholder:"\u4e0d\u80fd\u4e3a\u7a7a"}))))}})||k),A=(M=(0,x.connect)(e=>{var t=e.data_article,a=e.loading;return{data_article:t,loading:a.models.rule}}),w=g.default.create(),M(F=w(F=class extends U.Component{constructor(){super(...arguments),this.state={selectedRows:[]},this.columns=[{title:"id",dataIndex:"id",sorter:!0,align:"center"},{title:"\u6807\u9898",dataIndex:"title",sorter:!0,align:"center",render(e){if(e.length>=10){var t=e.substr(0,10);return t+="...",U.default.createElement(h.default,{title:e},U.default.createElement("span",null,t))}return U.default.createElement("span",null,e)}},{title:"\u5206\u7c7b",sorter:!0,dataIndex:"skill",align:"center",render:(e,t)=>{var a=t.skill,l=t.skillId;return null!=a?U.default.createElement(h.default,{title:"["+a.first+"/"+a.second+"/"+a.third+"]"},U.default.createElement("span",null,"["+a.first+"]["+l+"]")):U.default.createElement(h.default,{title:"[-]"},U.default.createElement("span",null,"["+l+"]"))}},{title:"\u53d1\u8868\u65f6\u95f4",sorter:!0,dataIndex:"createDate",align:"center"},{title:"\u53d1\u8868\u5e73\u53f0",sorter:!0,dataIndex:"platform",align:"center"},{title:"\u65f6\u95f4\u6233",sorter:!0,dataIndex:"timestamp",align:"center",render(e){return(0,q.default)(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64cd\u4f5c",align:"center",render:(e,t)=>U.default.createElement(U.Fragment,null,U.default.createElement("a",{href:t.url,target:"_blank"},"\u67e5\u770b"),U.default.createElement(f.default,{type:"vertical"}),U.default.createElement("a",{onClick:()=>this.showUpdate(t)},"\u4fee\u6539"),U.default.createElement(f.default,{type:"vertical"}),U.default.createElement("a",{onClick:()=>this.dealDelete(t)},"\u5220\u9664"))}],this.handleMenuClick=(e=>{this.props.dispatch;var t=this.state.selectedRows;if(t)switch(e.key){case"remove":(0,R.openNotification)("info","\u8be5\u529f\u80fd\u6682\u672a\u5b9e\u73b0");break;default:break}}),this.handleSelectRows=(e=>{this.setState({selectedRows:e})}),this.handleStandardTableChange=((e,t,a)=>{var l=this.props.dispatch,d=Object.keys(t).reduce((e,a)=>{var l=(0,c.default)({},e);return l[a]=(0,I.getValue)(t[a]),l},{}),r=(0,c.default)({currentPage:e.current,pageSize:e.pageSize},d);a.field&&(r.sorter=`${a.field}_${a.order}`),l({type:"data_article/fetch",payload:r})}),this.handleSearch=(e=>{e.preventDefault();var t=this.props,a=t.dispatch,l=t.form;l.validateFields((e,t)=>{if(!e){t.skills?(t.first=t.skills[0],t.second=t.skills[1],t.third=t.skills[2]):(t.first="",t.second="",t.third=""),"undefined"==typeof t.platform&&(t.platform="");var l={};Object.keys(t).forEach(function(e){"undefined"!=typeof t[e]&&(l[e]=t[e])}),a({type:"data_article/fetch",payload:l})}})}),this.handleFormReset=(()=>{var e=this.props,t=e.form,a=e.dispatch;t.resetFields(),a({type:"data_article/setFormValues",payload:{formValues:{title:"",platform:"",first:"",second:"",third:""}}}),a({type:"data_article/fetch"})}),this.handleAdd=(e=>{var t=this.props.dispatch;e.first=e.type[0],e.second=e.type[1],e.third=e.type[2],e.createDate=e.createDate.format("YYYY-MM-DD"),t({type:"data_article/add",payload:(0,c.default)({},e)})}),this.handleModalVisible=(e=>{var t=this.props.dispatch;"undefined"==typeof e&&(e=!1),t({type:"data_article/setModalVisible",payload:!!e})}),this.handleUpdateModalVisible=(e=>{var t=this.props.dispatch;"undefined"==typeof e&&(e=!1),t({type:"data_article/setUpdateModalVisible",payload:{updateModalVisible:!!e}})}),this.handleUpdate=(e=>{var t=this.props.dispatch;y.default.confirm({title:"\u4fee\u6539\u6587\u7ae0",content:"\u786e\u5b9a\u66f4\u65b0\u6587\u7ae0["+e.title+"]["+e.id+"]\u5417?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:()=>{e.first=e.type[0],e.second=e.type[1],e.third=e.type[2],e.createDate=e.createDate.format("YYYY-MM-DD"),t({type:"data_article/updateStep2",payload:(0,c.default)({},e)})}})})}dealDelete(e){var t=this.props.dispatch;y.default.confirm({title:"\u5220\u9664\u6587\u7ae0",content:"\u786e\u5b9a\u5220\u9664\u6587\u7ae0["+e.title+"]["+e.id+"]\u5417?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:()=>{t({type:"data_article/delete",payload:e.id})}})}componentDidMount(){var e=this.props.dispatch;e({type:"data_article/getPlatforms"}),e({type:"data_article/getOption"}),e({type:"data_article/fetch"})}renderForm(e,t){for(var a=this.props.form.getFieldDecorator,l=[],d=0;d<t.length;d++)l.push(U.default.createElement(T,{key:t[d]},t[d]));return U.default.createElement(g.default,{onSubmit:this.handleSearch,layout:"inline"},U.default.createElement(o.default,{gutter:{md:8,lg:24,xl:48}},U.default.createElement(u.default,{md:8,sm:24},U.default.createElement(H,{label:"\u6807\u9898"},a("title")(U.default.createElement(b.default,{placeholder:"\u6a21\u7cca\u5339\u914d"})))),U.default.createElement(u.default,{md:8,sm:24},U.default.createElement(H,{label:"\u5e73\u53f0"},a("platform")(U.default.createElement(_.default,{style:{minWidth:150},allowClear:!0},l)))),U.default.createElement(u.default,{md:8,sm:24},U.default.createElement(H,{label:"\u5206\u7c7b"},a("skills")(U.default.createElement(E.default,{options:e,loadData:e=>this.loadData(e),onChange:(e,t)=>this.onChange(e,t),changeOnSelect:!0})))),U.default.createElement(u.default,{md:8,sm:24},U.default.createElement("span",{className:Y.default.submitButtons},U.default.createElement(p.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),U.default.createElement(p.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}loadData(e){console.log(e);var t=this.props.dispatch,a=e.length,l={};3==a||(l=2==a?{name:"third",first:e[0].value,second:e[1].value}:1==a?{name:"second",first:e[0].value}:{name:"first"}),t({type:"data_article/getOption",payload:l})}onChange(e,t){var a=this.props.dispatch,l=t.length;a(3==l?{type:"data_article/setFormValues",payload:{formValues:{first:t[0].value,second:t[1].value,third:t[2].value}}}:2==l?{type:"data_article/setFormValues",payload:{formValues:{first:t[0].value,second:t[1].value,third:""}}}:1==l?{type:"data_article/setFormValues",payload:{formValues:{first:t[0].value,second:"",third:""}}}:{type:"data_article/setFormValues",payload:{formValues:{first:"",second:"",third:""}}}),console.log(e,t)}showUpdate(e){var t=this.props.dispatch;t({type:"data_article/updateStep1",payload:{id:e.id}})}render(){var e=this.props,t=e.data_article,a=t.list,l=t.pagination,d=t.platforms,o=t.options,u=t.modalVisible,c=t.updateModalData,f=t.updateModalVisible,h=e.loading,y=this.state.selectedRows,E={list:a,pagination:l},v=U.default.createElement(n.default,{onClick:this.handleMenuClick,selectedKeys:[]},U.default.createElement(n.default.Item,{key:"remove"},"\u5220\u9664")),b={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,loadData:this.loadData,onChange:this.onChange,options:o,dispatch:this.props.dispatch},g={handleUpdate:this.handleUpdate,handleUpdateModalVisible:this.handleUpdateModalVisible,loadData:this.loadData,onChange:this.onChange,options:o,dispatch:this.props.dispatch};return U.default.createElement(O.default,{title:"\u6587\u7ae0\u4fe1\u606f\u7ba1\u7406"},U.default.createElement(i.default,{bordered:!1},U.default.createElement("div",{className:Y.default.tableList},U.default.createElement("div",{className:Y.default.tableListForm},this.renderForm(o,d)),U.default.createElement("div",{className:Y.default.tableListOperator},U.default.createElement(p.default,{icon:"plus",type:"primary",onClick:()=>this.handleModalVisible(!0)},"\u65b0\u5efa"),y.length>0&&U.default.createElement("span",null,U.default.createElement(s.default,{overlay:v},U.default.createElement(p.default,null,"\u6279\u91cf\u64cd\u4f5c ",U.default.createElement(m.default,{type:"down"}))))),U.default.createElement(S.default,{selectedRows:y,loading:h,data:E,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,rowKey:"id"}))),U.default.createElement(N,(0,r.default)({},b,{modalVisible:u})),U.default.createElement(P,(0,r.default)({},g,{updateModalVisible:f,updateModalData:c})))}})||F)||F),L=A;t.default=L}}]);