(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"S/WG":function(e,t,a){e.exports={coverCardList:"antd-pro_pages_-workbench_-book-coverCardList",card:"antd-pro_pages_-workbench_-book-card",cardItemContent:"antd-pro_pages_-workbench_-book-cardItemContent",avatarList:"antd-pro_pages_-workbench_-book-avatarList",cardList:"antd-pro_pages_-workbench_-book-cardList",tableListForm:"antd-pro_pages_-workbench_-book-tableListForm",submitButtons:"antd-pro_pages_-workbench_-book-submitButtons"}},XWDf:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("pVnL"));a("5NDa");var d=l(a("5rEg"));a("IzEo");var o=l(a("bx4M"));a("/zsF");var s=l(a("PArb"));a("+L6B");var c=l(a("2/Rp"));a("miYZ");var u=l(a("tsqr"));a("2qtc");var i=l(a("kLXV"));a("Mwp2");var f=l(a("VXEj"));a("14J3");var m=l(a("BMrR"));a("MXD1");var p=l(a("CFYs"));a("jCWc");var h=l(a("kPKH"));a("+BJd");var b=l(a("mr32"));a("Pwec");var g=l(a("CtXQ"));a("y8nQ");var E,y,v,w=l(a("Vl3Y")),k=l(a("JA3D")),_=r(a("q1tI")),L=a("MuoO"),x=l(a("S/WG")),F=l(a("wd/R")),N=w.default.Item,S={wrapperCol:{xs:{span:24},sm:{span:24},md:{span:12}}},C=e=>{var t=e.type,a=e.text,l=e.badge;return _.default.createElement("span",null,_.default.createElement(g.default,{type:t,style:{marginRight:8}}),a,l?_.default.createElement(b.default,{color:"#2db7f5"},l):null)};class I extends _.Component{constructor(e){super(e),this.changeShowNoteList=this.props.changeShowNoteList}render(){var e=this.props,t=e.showNoteList,a=e.noteList;e.loading;return _.default.createElement(i.default,{destroyOnClose:!0,title:"\u7b14\u8bb0\u5217\u8868",visible:t,footer:null,closable:!0,centered:!0,onCancel:()=>this.changeShowNoteList(!1)},a.length>0?_.default.createElement(f.default,null,a.map((e,t)=>_.default.createElement(f.default.Item,null,_.default.createElement(m.default,{gutter:24,style:{width:"200%"}},_.default.createElement(h.default,{md:8,sm:24},_.default.createElement(b.default,null,"\u65e5\u671f"),(0,F.default)(e.date).format("YYYY-MM-DD")),_.default.createElement(h.default,{md:8,sm:24},_.default.createElement(b.default,null,"\u8fdb\u5ea6"),_.default.createElement(p.default,{percent:parseInt(100*e.current/e.book.count),size:"small",style:{width:"60%"}})),_.default.createElement(h.default,{md:8,sm:24},_.default.createElement("a",{href:e.url,target:"_blank"},_.default.createElement(b.default,null,"\u67e5\u770b"))))))):_.default.createElement("h1",null,"\u6ca1\u6570\u636e"))}}var M=(E=w.default.create({}),y=(0,L.connect)(e=>{var t=e.workbench_index,a=e.loading;return{workbench_index:t,loading:a}}),E(v=y(v=class extends _.Component{constructor(){super(...arguments),this.handleSearch=(e=>{e.preventDefault();var t=this.props,a=t.dispatch,l=t.form;l.validateFields((e,t)=>{if(!e){var l=this.getDataFromForm(t);l.pagination={current:1,pageSize:8,total:0},a({type:"workbench_index/book_fetch",payload:l})}})})}componentWillMount(){var e=this.props.dispatch;e({type:"workbench_index/book_fetch"})}handleFormReset(){var e=this.props,t=e.form,a=e.dispatch;t.resetFields(),a({type:"workbench_index/book_fetch",payload:{name:"",first:"",second:"",third:""}})}getDataFromForm(e){e.type?(e.first=e.type[0]?e.type[0]:"",e.second=e.type[1]?e.type[1]:"",e.third=e.type[2]?e.type[2]:""):(e.first="",e.second="",e.third="");var t={};return Object.keys(e).forEach(function(a){"undefined"!=typeof e[a]&&(t[a]=e[a])}),t}fetchMore(e){var t=this.props,a=t.dispatch,l=t.form;l.validateFields((t,l)=>{if(!t){var r=this.getDataFromForm(l);r.pagination={current:e.current+1,pageSize:10,total:e.total},r.append=!0,a({type:"workbench_index/book_fetch",payload:r})}})}changeShowNoteList(e,t){var a=this.props.dispatch;if(t){if(0===t.current)return void u.default.error("\u8fd8\u6ca1\u6709\u5f00\u59cb\u9605\u8bfb\u300a"+t.name+"\u300b");e&&a({type:"workbench_index/note_fetch",payload:{bookId:t.id}})}a({type:"workbench_index/changeStateBook",payload:{showNoteList:!!e}})}render(){var e=this.props,t=e.form,a=e.workbench_index,l=e.loading,r=t.getFieldDecorator,u=a.book,i=u.list,E=u.pagination,y=u.hasNext?_.default.createElement("div",{style:{textAlign:"center",marginTop:16}},_.default.createElement(c.default,{onClick:()=>{this.fetchMore(E)},style:{paddingLeft:48,paddingRight:48}},l.effects["workbench_index/book_fetch"]?_.default.createElement("span",null,_.default.createElement(g.default,{type:"loading"})," \u52a0\u8f7d\u4e2d..."):"\u52a0\u8f7d\u66f4\u591a")):null,v=i?_.default.createElement(f.default,{rowKey:"id",loading:l.effects["workbench_index/book_fetch"],loadMore:y,grid:{gutter:24,xl:4,lg:3,md:3,sm:2,xs:1},dataSource:i,renderItem:(e,t)=>_.default.createElement(f.default.Item,null,_.default.createElement(o.default,{className:x.default.card,hoverable:!0,cover:_.default.createElement("img",{alt:e.name,src:e.img,style:{height:"280px",padding:"0 10%"}}),actions:[_.default.createElement("a",{onClick:()=>{this.changeShowNoteList(!0,e)}},_.default.createElement(C,{type:"eye",text:"\u67e5\u770b\u7b14\u8bb0"})),_.default.createElement(C,{type:"star",text:"\u8c46\u74e3\u8bc4\u5206:",badge:e.score})]},_.default.createElement(o.default.Meta,{title:_.default.createElement(_.Fragment,null,t+1,_.default.createElement(s.default,{type:"vertical"}),e.name)}),_.default.createElement("div",{className:x.default.cardItemContent},_.default.createElement("div",{className:x.default.avatarList,style:{paddingTop:"10px"}},_.default.createElement(b.default,null,"\u9605\u8bfb\u8fdb\u5ea6"),_.default.createElement(p.default,{percent:parseInt(100*e.current/e.count),size:"small",style:{width:"60%"}})))))}):null,L=u.showNoteList,F=u.noteList,M={showNoteList:L,noteList:F,changeShowNoteList:this.changeShowNoteList,dispatch:this.props.dispatch};return _.default.createElement(_.Fragment,null,_.default.createElement(o.default,{bordered:!1},_.default.createElement("div",{className:x.default.tableListForm},_.default.createElement(w.default,{layout:"inline",onSubmit:this.handleSearch},_.default.createElement(m.default,{gutter:{md:8,lg:24,xl:48}},_.default.createElement(h.default,{md:8,sm:24},_.default.createElement(N,(0,n.default)({},S,{label:"\u540d\u79f0"}),r("name",{})(_.default.createElement(d.default,{placeholder:"\u6a21\u7cca\u5339\u914d",style:{width:"100%"}})))),_.default.createElement(h.default,{md:8,sm:24},_.default.createElement(N,(0,n.default)({},S,{label:"\u5206\u7c7b"}),r("type",{})(_.default.createElement(k.default,{style:{width:"100%"},type:"SKILL"}))))),_.default.createElement(m.default,null,_.default.createElement(h.default,{md:8,sm:24},_.default.createElement("span",{className:x.default.submitButtons},_.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),_.default.createElement(c.default,{style:{marginLeft:8},onClick:()=>{this.handleFormReset()}},"\u91cd\u7f6e"))))))),_.default.createElement("div",{className:x.default.cardList,style:{marginTop:24}},v),_.default.createElement(I,M))}})||v)||v),D=M;t.default=D}}]);