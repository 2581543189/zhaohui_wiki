(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{XWDf:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("pVnL"));a("5NDa");var d=l(a("5rEg"));a("IzEo");var o=l(a("bx4M"));a("/zsF");var u=l(a("PArb"));a("+L6B");var c=l(a("2/Rp"));a("miYZ");var s=l(a("tsqr"));a("2qtc");var i=l(a("kLXV"));a("Mwp2");var f=l(a("VXEj"));a("14J3");var m=l(a("BMrR"));a("MXD1");var p=l(a("CFYs"));a("jCWc");var h=l(a("kPKH"));a("+BJd");var E=l(a("mr32"));a("Pwec");var g=l(a("CtXQ"));a("y8nQ");var y,v,b,w=l(a("Vl3Y")),k=l(a("JA3D")),x=r(a("q1tI")),L=a("MuoO"),_=l(a("S/WG")),N=l(a("wd/R")),F=w.default.Item,S={wrapperCol:{xs:{span:24},sm:{span:24},md:{span:12}}},M=e=>{var t=e.type,a=e.text,l=e.badge;return x.default.createElement("span",null,x.default.createElement(g.default,{type:t,style:{marginRight:8}}),a,l?x.default.createElement(E.default,{color:"#2db7f5"},l):null)};class C extends x.Component{constructor(e){super(e),this.changeShowNoteList=this.props.changeShowNoteList}render(){var e=this.props,t=e.showNoteList,a=e.noteList;e.loading;return x.default.createElement(i.default,{destroyOnClose:!0,title:"\u7b14\u8bb0\u5217\u8868",visible:t,footer:null,closable:!0,centered:!0,onCancel:()=>this.changeShowNoteList(!1)},a.length>0?x.default.createElement(f.default,null,a.map((e,t)=>x.default.createElement(f.default.Item,null,x.default.createElement(m.default,{gutter:24,style:{width:"200%"}},x.default.createElement(h.default,{md:8,sm:24},x.default.createElement(E.default,null,"\u65e5\u671f"),(0,N.default)(e.date).format("YYYY-MM-DD")),x.default.createElement(h.default,{md:8,sm:24},x.default.createElement(E.default,null,"\u8fdb\u5ea6"),x.default.createElement(p.default,{percent:parseInt(100*e.current/e.book.count),size:"small",style:{width:"60%"}})),x.default.createElement(h.default,{md:8,sm:24},x.default.createElement("a",{href:e.url,target:"_blank"},x.default.createElement(E.default,null,"\u67e5\u770b"))))))):x.default.createElement("h1",null,"\u6ca1\u6570\u636e"))}}var D=(y=w.default.create({}),v=(0,L.connect)(e=>{var t=e.workbench_index,a=e.loading;return{workbench_index:t,loading:a}}),y(b=v(b=class extends x.Component{constructor(){super(...arguments),this.handleSearch=(e=>{e.preventDefault();var t=this.props,a=t.dispatch,l=t.form;l.validateFields((e,t)=>{if(!e){var l=this.getDataFromForm(t);l.pagination={current:1,pageSize:8,total:0},a({type:"workbench_index/book_fetch",payload:l})}})})}componentWillMount(){var e=this.props.dispatch;e({type:"workbench_index/book_fetch"})}handleFormReset(){var e=this.props,t=e.form,a=e.dispatch;t.resetFields(),a({type:"workbench_index/book_fetch",payload:{name:"",first:"",second:"",third:""}})}getDataFromForm(e){e.type?(e.first=e.type[0]?e.type[0]:"",e.second=e.type[1]?e.type[1]:"",e.third=e.type[2]?e.type[2]:""):(e.first="",e.second="",e.third="");var t={};return Object.keys(e).forEach(function(a){"undefined"!=typeof e[a]&&(t[a]=e[a])}),t}fetchMore(e){var t=this.props,a=t.dispatch,l=t.form;l.validateFields((t,l)=>{if(!t){var r=this.getDataFromForm(l);r.pagination={current:e.current+1,pageSize:10,total:e.total},r.append=!0,a({type:"workbench_index/book_fetch",payload:r})}})}changeShowNoteList(e,t){var a=this.props.dispatch;if(t){if(0===t.current)return void s.default.error("\u8fd8\u6ca1\u6709\u5f00\u59cb\u9605\u8bfb\u300a"+t.name+"\u300b");e&&a({type:"workbench_index/note_fetch",payload:{bookId:t.id}})}a({type:"workbench_index/changeStateBook",payload:{showNoteList:!!e}})}render(){var e=this.props,t=e.form,a=e.workbench_index,l=e.loading,r=t.getFieldDecorator,s=a.book,i=s.list,y=s.pagination,v=s.hasNext?x.default.createElement("div",{style:{textAlign:"center",marginTop:16}},x.default.createElement(c.default,{onClick:()=>{this.fetchMore(y)},style:{paddingLeft:48,paddingRight:48}},l.effects["workbench_index/book_fetch"]?x.default.createElement("span",null,x.default.createElement(g.default,{type:"loading"})," \u52a0\u8f7d\u4e2d..."):"\u52a0\u8f7d\u66f4\u591a")):null,b=i?x.default.createElement(f.default,{rowKey:"id",loading:l.effects["workbench_index/book_fetch"],loadMore:v,grid:{gutter:24,xl:4,lg:3,md:3,sm:2,xs:1},dataSource:i,renderItem:(e,t)=>x.default.createElement(f.default.Item,null,x.default.createElement(o.default,{className:_.default.card,hoverable:!0,cover:x.default.createElement("img",{alt:e.name,src:e.img,style:{height:"280px",padding:"0 10%"}}),actions:[x.default.createElement("a",{onClick:()=>{this.changeShowNoteList(!0,e)}},x.default.createElement(M,{type:"eye",text:"\u67e5\u770b\u7b14\u8bb0"})),x.default.createElement(M,{type:"star",text:"\u8c46\u74e3\u8bc4\u5206:",badge:e.score})]},x.default.createElement(o.default.Meta,{title:x.default.createElement(x.Fragment,null,t+1,x.default.createElement(u.default,{type:"vertical"}),e.name)}),x.default.createElement("div",{className:_.default.cardItemContent},x.default.createElement("div",{className:_.default.avatarList,style:{paddingTop:"10px"}},x.default.createElement(E.default,null,"\u9605\u8bfb\u8fdb\u5ea6"),x.default.createElement(p.default,{percent:parseInt(100*e.current/e.count),size:"small",style:{width:"60%"}})))))}):null,L=s.showNoteList,N=s.noteList,D={showNoteList:L,noteList:N,changeShowNoteList:this.changeShowNoteList,dispatch:this.props.dispatch};return x.default.createElement(x.Fragment,null,x.default.createElement(o.default,{bordered:!1},x.default.createElement("div",{className:_.default.tableListForm},x.default.createElement(w.default,{layout:"inline",onSubmit:this.handleSearch},x.default.createElement(m.default,{gutter:{md:8,lg:24,xl:48}},x.default.createElement(h.default,{md:8,sm:24},x.default.createElement(F,(0,n.default)({},S,{label:"\u540d\u79f0"}),r("name",{})(x.default.createElement(d.default,{placeholder:"\u6a21\u7cca\u5339\u914d",style:{width:"100%"}})))),x.default.createElement(h.default,{md:8,sm:24},x.default.createElement(F,(0,n.default)({},S,{label:"\u5206\u7c7b"}),r("type",{})(x.default.createElement(k.default,{style:{width:"100%"}}))))),x.default.createElement(m.default,null,x.default.createElement(h.default,{md:8,sm:24},x.default.createElement("span",{className:_.default.submitButtons},x.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),x.default.createElement(c.default,{style:{marginLeft:8},onClick:()=>{this.handleFormReset()}},"\u91cd\u7f6e"))))))),x.default.createElement("div",{className:_.default.cardList,style:{marginTop:24}},b),x.default.createElement(C,D))}})||b)||b),I=D;t.default=I}}]);