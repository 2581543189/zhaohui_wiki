(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"5nk9":function(e,a,t){"use strict";var r=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(t("o0o1")),o=r(t("MVZn")),s=t("7Y5E"),u=t("+n12"),d={namespace:"data_note",state:{list:[],pagination:{current:1,pageSize:10,total:0},formValues:{name:""},options:[],modalVisible:!1,addBook:{count:-1},updateModalData:{id:0,bookName:"-",current:0,date:"1970-01-01",url:"http://"},updateModalVisible:!1},effects:{fetch:n.default.mark(function e(a,t){var r,d,l,i,p,c,f;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,d=t.call,l=t.put,i=t.select,"undefined"==typeof r&&(r={}),e.next=5,i(e=>e.data_note.formValues);case 5:return p=e.sent,c=(0,o.default)({},p,r),e.next=9,d(s.queryNote,c);case 9:if(f=e.sent,1==f.error){e.next=17;break}return e.next=13,l({type:"save",payload:f});case 13:return e.next=15,l({type:"setFormValues",payload:{formValues:{name:c.name}}});case 15:e.next=18;break;case 17:(0,u.openNotification)("error",f.message);case 18:case"end":return e.stop()}},e,this)}),getBooks:n.default.mark(function e(a,t){var r,o,d,l,i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.payload,o=t.call,d=t.put,t.select,"undefined"!=typeof r&&null!==r.name&&""!==r.name){e.next=4;break}return e.abrupt("return");case 4:return l={name:r.name},e.next=7,o(s.queryBook,l);case 7:if(i=e.sent,1==i.error){e.next=13;break}return e.next=11,d({type:"setOptions",payload:{options:i.list}});case 11:e.next=14;break;case 13:(0,u.openNotification)("error",i.message);case 14:case"end":return e.stop()}},e,this)}),getOneBook:n.default.mark(function e(a,t){var r,o,d,l,i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.payload,o=t.call,d=t.put,t.select,"undefined"!=typeof r&&null!==r.name&&""!==r.name){e.next=4;break}return e.abrupt("return");case 4:return l={name:r.name},e.next=7,o(s.queryBook,l);case 7:if(i=e.sent,1==i.error){e.next=13;break}return e.next=11,d({type:"setAddBook",payload:{addBook:i.data.list[0]}});case 11:e.next=14;break;case 13:(0,u.openNotification)("error",i.message);case 14:case"end":return e.stop()}},e,this)}),add:n.default.mark(function e(a,t){var r,o,d,l;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,o=t.call,d=t.put,t.select,e.next=4,o(s.addNote,r);case 4:if(l=e.sent,1==l.error){e.next=13;break}return e.next=8,d({type:"setModalVisible",payload:!1});case 8:return(0,u.openNotification)("success","\u65b0\u589e\u7b14\u8bb0["+l.data.id+"]\u6210\u529f"),e.next=11,d({type:"fetch",payload:{currentPage:1,pageSize:10,id:l.id}});case 11:e.next=14;break;case 13:(0,u.openNotification)("error",l.message);case 14:case"end":return e.stop()}},e,this)}),delete:n.default.mark(function e(a,t){var r,d,l,i,p,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,d=t.call,l=t.put,i=t.select,e.next=4,d(s.deleteNote,r);case 4:if(p=e.sent,1==p.error){e.next=14;break}return(0,u.openNotification)("success","\u5220\u9664\u7b14\u8bb0["+p.data.id+"]\u6210\u529f"),e.next=9,i(e=>e.data_note.formValues);case 9:return c=e.sent,e.next=12,l({type:"fetch",payload:(0,o.default)({currentPage:1,pageSize:10},c)});case 12:e.next=15;break;case 14:(0,u.openNotification)("error",p.message);case 15:case"end":return e.stop()}},e,this)}),updateStep1:n.default.mark(function e(a,t){var r,o,d,l,i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,o=t.call,d=t.put,l={id:r.id},e.next=5,o(s.queryNote,l);case 5:if(i=e.sent,1==i.error){e.next=11;break}return e.next=9,d({type:"setUpdateModalVisible",payload:{updateModalVisible:!0,updateModalData:i.data.list[0]}});case 9:e.next=12;break;case 11:(0,u.openNotification)("error",i.message);case 12:case"end":return e.stop()}},e,this)}),updateStep2:n.default.mark(function e(a,t){var r,d,l,i,p,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,d=t.call,l=t.put,i=t.select,e.next=4,d(s.updateNote,r);case 4:if(p=e.sent,1==p.error){e.next=15;break}return e.next=8,l({type:"setUpdateModalVisible",payload:{updateModalVisible:!1,updateModalData:{id:0,bookName:"-",current:0,date:"1970-01-01",url:"http://"}}});case 8:return e.next=10,i(e=>e.data_note.formValues);case 10:return c=e.sent,e.next=13,l({type:"fetch",payload:(0,o.default)({currentPage:1,pageSize:10},c)});case 13:e.next=16;break;case 15:(0,u.openNotification)("error",p.message);case 16:case"end":return e.stop()}},e,this)})},reducers:{save(e,a){return(0,o.default)({},e,{list:a.payload.list,pagination:a.payload.pagination})},setFormValues(e,a){return e.formValues=(0,o.default)({},e.formValues,a.payload.formValues),(0,o.default)({},e)},setOptions(e,a){return e.options=a.payload.options,(0,o.default)({},e)},setModalVisible(e,a){return(0,o.default)({},e,{modalVisible:a.payload})},setUpdateModalVisible(e,a){var t={id:0,bookName:"-",current:0,date:"1970-01-01",url:"http://"};return(0,o.default)({},e,{updateModalVisible:a.payload.updateModalVisible,updateModalData:a.payload.updateModalData?a.payload.updateModalData:t})},setAddBook(e,a){return(0,o.default)({},e,{addBook:a.payload.addBook})}}};a.default=d}}]);