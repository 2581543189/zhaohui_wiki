(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"HmL+":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("o0o1")),l=r(a("MVZn")),s=a("7Y5E"),d=a("+n12"),i={namespace:"data_bulletin",state:{list:[],pagination:{current:1,pageSize:10,total:0},formValues:{startDate:"",endDate:""},modalVisible:!1,updateModalData:{id:0,startDate:"1970-01-01",endDate:"1970-01-01",level:0,sketch:"",startUrl:"http://",endUrl:"http://"},updateModalVisible:!1},effects:{fetch:n.default.mark(function e(t,a){var r,i,u,o,p,c,f;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,i=a.call,u=a.put,o=a.select,"undefined"==typeof r&&(r={}),e.next=5,o(e=>e.data_bulletin.formValues);case 5:return p=e.sent,c=(0,l.default)({},p,r),e.next=9,i(s.queryBulletin,c);case 9:if(f=e.sent,1==f.error){e.next=17;break}return e.next=13,u({type:"save",payload:f});case 13:return e.next=15,u({type:"setFormValues",payload:{formValues:{name:c.name}}});case 15:e.next=18;break;case 17:(0,d.openNotification)("error",f.message);case 18:case"end":return e.stop()}},e,this)}),add:n.default.mark(function e(t,a){var r,l,i,u;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,t.callback,l=a.call,i=a.put,a.select,e.next=4,l(s.addBulletin,r);case 4:if(u=e.sent,1==u.error){e.next=13;break}return e.next=8,i({type:"setModalVisible",payload:!1});case 8:return(0,d.openNotification)("success","\u65b0\u589e\u4efb\u52a1["+u.id+"]\u6210\u529f"),e.next=11,i({type:"fetch",payload:{currentPage:1,pageSize:10,id:u.id}});case 11:e.next=14;break;case 13:(0,d.openNotification)("error",u.message);case 14:case"end":return e.stop()}},e,this)}),delete:n.default.mark(function e(t,a){var r,i,u,o,p,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,i=a.call,u=a.put,o=a.select,e.next=4,i(s.deleteBulletin,r);case 4:if(p=e.sent,1==p.error){e.next=14;break}return(0,d.openNotification)("success","\u5220\u9664\u4efb\u52a1["+p.id+"]\u6210\u529f"),e.next=9,o(e=>e.data_bulletin.formValues);case 9:return c=e.sent,e.next=12,u({type:"fetch",payload:(0,l.default)({currentPage:1,pageSize:10},c)});case 12:e.next=15;break;case 14:(0,d.openNotification)("error",p.message);case 15:case"end":return e.stop()}},e,this)}),updateStep1:n.default.mark(function e(t,a){var r,l,i,u,o;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,l=a.call,i=a.put,u={id:r.id},e.next=5,l(s.queryBulletin,u);case 5:if(o=e.sent,1==o.error){e.next=11;break}return e.next=9,i({type:"setUpdateModalVisible",payload:{updateModalVisible:!0,updateModalData:o.list[0]}});case 9:e.next=12;break;case 11:(0,d.openNotification)("error",o.message);case 12:case"end":return e.stop()}},e,this)}),updateStep2:n.default.mark(function e(t,a){var r,i,u,o,p,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,i=a.call,u=a.put,o=a.select,e.next=4,i(s.updateBulletin,r);case 4:if(p=e.sent,1==p.error){e.next=15;break}return e.next=8,u({type:"setUpdateModalVisible",payload:{updateModalVisible:!1,updateModalData:{id:0,startDate:"1970-01-01",endDate:"1970-01-01",level:0,sketch:"",startUrl:"http://",endUrl:"http://"}}});case 8:return e.next=10,o(e=>e.data_bulletin.formValues);case 10:return c=e.sent,e.next=13,u({type:"fetch",payload:(0,l.default)({currentPage:1,pageSize:10},c)});case 13:e.next=16;break;case 15:(0,d.openNotification)("error",p.message);case 16:case"end":return e.stop()}},e,this)})},reducers:{save(e,t){return(0,l.default)({},e,{list:t.payload.list,pagination:t.payload.pagination})},setFormValues(e,t){return e.formValues=(0,l.default)({},e.formValues,t.payload.formValues),(0,l.default)({},e)},setModalVisible(e,t){return(0,l.default)({},e,{modalVisible:t.payload})},setUpdateModalVisible(e,t){var a={id:0,startDate:"1970-01-01",endDate:"1970-01-01",level:0,sketch:"",startUrl:"http://",endUrl:"http://"};return(0,l.default)({},e,{updateModalVisible:t.payload.updateModalVisible,updateModalData:t.payload.updateModalData?t.payload.updateModalData:a})}}};t.default=i}}]);