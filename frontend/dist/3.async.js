(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{FJVH:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a("o0o1")),l=r(a("MVZn")),n=a("7Y5E"),i=a("+n12"),o={namespace:"data_article",state:{list:[],pagination:{current:1,pageSize:10,total:0},platforms:[],formValues:{type:"SKILL",title:"",platform:"",first:"",second:"",third:""},options:[],modalVisible:!1,updateModalData:{id:0,title:"-",gmt_create:"1970-01-01 00:00:00",url:"http://",type:[],platform:"-"},updateModalVisible:!1},effects:{fetch:s.default.mark(function e(t,a){var r,o,d,u,c,p,f;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=a.call,d=a.put,u=a.select,"undefined"==typeof r&&(r={}),e.next=5,u(e=>e.data_article.formValues);case 5:return c=e.sent,p=(0,l.default)({},c,r),e.next=9,o(n.queryArticle,p);case 9:if(f=e.sent,1==f.error){e.next=17;break}return e.next=13,d({type:"save",payload:f});case 13:return e.next=15,d({type:"setFormValues",payload:{formValues:{title:p.title,platform:p.platform,first:p.first,second:p.second,third:p.third}}});case 15:e.next=18;break;case 17:(0,i.openNotification)("error",f.message);case 18:case"end":return e.stop()}},e,this)}),getPlatforms:s.default.mark(function e(t,a){var r,l,o,d;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,l=a.call,o=a.put,a.select,e.next=4,l(n.distinctPlatforms,r);case 4:if(d=e.sent,1==d.error){e.next=10;break}return e.next=8,o({type:"setplatforms",payload:{platforms:d.body.array}});case 8:e.next=11;break;case 10:(0,i.openNotification)("error",d.message);case 11:case"end":return e.stop()}},e,this)}),add:s.default.mark(function e(t,a){var r,l,o,d,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,t.callback,l=a.call,o=a.put,d=a.select,e.next=4,l(n.addArticle,r);case 4:if(u=e.sent,1==u.error){e.next=16;break}return e.next=8,o({type:"setModalVisible",payload:!1});case 8:return(0,i.openNotification)("success","\u65b0\u589e\u6587\u7ae0"+u.data.title+"["+u.data.id+"]\u6210\u529f"),e.next=11,d(e=>e.data_article.formValues);case 11:return e.sent,e.next=14,o({type:"fetch",payload:{currentPage:1,pageSize:10,id:u.id}});case 14:e.next=17;break;case 16:(0,i.openNotification)("error",u.message);case 17:case"end":return e.stop()}},e,this)}),delete:s.default.mark(function e(t,a){var r,o,d,u,c,p;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=a.call,d=a.put,u=a.select,e.next=4,o(n.deleteArticle,r);case 4:if(c=e.sent,1==c.error){e.next=14;break}return(0,i.openNotification)("success","\u5220\u9664\u6587\u7ae0["+c.data.id+"]\u6210\u529f"),e.next=9,u(e=>e.data_article.formValues);case 9:return p=e.sent,e.next=12,d({type:"fetch",payload:(0,l.default)({currentPage:1,pageSize:10},p)});case 12:e.next=15;break;case 14:(0,i.openNotification)("error",c.message);case 15:case"end":return e.stop()}},e,this)}),updateStep1:s.default.mark(function e(t,a){var r,l,o,d,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,l=a.call,o=a.put,d={id:r.id},e.next=5,l(n.queryArticle,d);case 5:if(u=e.sent,1==u.error){e.next=11;break}return e.next=9,o({type:"setUpdateModalVisible",payload:{updateModalVisible:!0,updateModalData:u.list[0]}});case 9:e.next=12;break;case 11:(0,i.openNotification)("error",u.message);case 12:case"end":return e.stop()}},e,this)}),updateStep2:s.default.mark(function e(t,a){var r,o,d,u,c,p;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=a.call,d=a.put,u=a.select,delete r.type,e.next=5,o(n.updateArticle,r);case 5:if(c=e.sent,1==c.error){e.next=16;break}return e.next=9,d({type:"setUpdateModalVisible",payload:{updateModalVisible:!1,updateModalData:{id:0,title:"-",gmt_create:"1970-01-01",url:"http://",type:[],platform:"-"}}});case 9:return e.next=11,u(e=>e.data_article.formValues);case 11:return p=e.sent,e.next=14,d({type:"fetch",payload:(0,l.default)({currentPage:1,pageSize:10,id:c.id},p)});case 14:e.next=17;break;case 16:(0,i.openNotification)("error",c.message);case 17:case"end":return e.stop()}},e,this)})},reducers:{save(e,t){return(0,l.default)({},e,{list:t.payload.list,pagination:t.payload.pagination})},setFormValues(e,t){return e.formValues=(0,l.default)({},e.formValues,t.payload.formValues),(0,l.default)({},e)},setplatforms(e,t){return e.platforms=t.payload.platforms,(0,l.default)({},e)},setModalVisible(e,t){return(0,l.default)({},e,{modalVisible:t.payload})},setUpdateModalVisible(e,t){var a={id:0,title:"-",gmt_create:"1970-01-01",url:"http://",type:[],platform:"-"};return(0,l.default)({},e,{updateModalData:t.payload.updateModalData?t.payload.updateModalData:a,updateModalVisible:t.payload.updateModalVisible})}}};t.default=o}}]);